<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Open vStorage</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="/lib/jquery/jquery-1.9.1.js" data-main="app/main"></script>
        <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/css/durandal.css" />
        <script type="text/javascript">
            var local_ip;
            $(document).ready(function() {
                if (localStorage.hasOwnProperty('nodes') && localStorage.nodes !== null) {
                    var i, node, nodes = $.parseJSON(localStorage.nodes);
                    for (i = 0; i < nodes.length; i += 1) {
                        node = nodes[i];
                        (function(node) {
                            $.ajax('https://' + node + '/api/internal/generic/0/?timestamp=' + (new Date().getTime()), {
                                        type: 'GET',
                                        contentType: 'application/jsonp',
                                        timeout: 5000
                                    })
                                    .done(function() {
                                        window.location.href = 'https://' + node;
                                    })
                        }(node));
                    }
                }
            });
        </script>
        <style>
            body {
                padding-top: 60px;
            }
        </style>
    </head>
    <body>
        <div class="splash">
            <div class="message">
                Open vStorage
            </div>
            <i class="fa fa-5x fa-spin">&#xf110;</i>
      </div>
    </body>
</html>
